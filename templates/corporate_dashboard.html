{% include "dashboard_base.html" %}
{% extends "material/base.html" %}

{% block content %}

<!-- start header -->
{% include "corporate_dashboard_primary_navbar.html" %}
<!-- end header -->

<div id="main" style="flex: 1 0 auto;">

    <div class="wrapper" style="height:100% !important;">

        {% include "corporate_dashboard_secondary_navbar.html" %}
        <section id="content">
            <!-- breadcrumbs start -->
            <!-- <div id="breadcrumbs-wrapper" class=" gray lighten-3">
                <div class="container">
                    <div class="row">
                        <div class="col s12 m12 l12">
                            <h5 class="breadcrumbs-title">{{ _("List of Employees") }}</h5>
                        </div>
                    </div>
                </div>
            </div> -->
            <!-- breadcrumbs end -->
            <!-- Start container -->
            <div class="container" style="width: 98% !important;">
                <div class="section">
                    <!-- <div class="divider"></div> -->
                    <div class="section">
                        <div class="row">
                            <form action="/corp/dashboard" method="post">
                                {% include "corporate_dashboard_search_form.html" %}
                            </form>

                        </div>
                    </div>

                    <div class="section">
                        <div class="row">
                            <h5 class="header">{{ _("List of Employees") }} </h5>
                            <div class="row">
                                <div class="col s12">
                                    <div class="card" style="height:600px !important; overflow-x:hidden; overflow-y:scroll">
                                        <div class="row" style="height:100% !important;">
                                            <div class="col s12">
                                                <table class="responsive-table">
                                                    <thead>
                                                    <tr>
                                                        <th>{{ _("Corporate Id") }}</th>
                                                        <th>{{ _("Last name") }}</th>
                                                        <th>{{ _("First name") }}</th>
                                                        <th>{{ _("Gender") }}</th>
                                                        <th>{{ _("Birth date") }}</th>
                                                        <th>{{ _("Phone number") }}</th>
                                                        <th>{{ _("Status") }}</th>
                                                        <th>{{ _("Role") }}</th>
                                                        <th>{{ _("Email") }}</th>
                                                        <th>{{ _("City") }}</th>
                                                        <th>{{ _("Registration date") }}</th>
                                                        <th>{{ _("Edit") }}</th>
                                                        <th>{{ _("More") }}</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    {% if users %}
                                                    {% for user in users["items"] %}
                                                    <tr>
                                                        <td>{{ user.employee_number }}</td>
                                                        <td>{{ user.last_name }}</td>
                                                        <td>{{ user.first_name }}</td>
                                                        <td>{{ user.gender[0]|upper}}{{user.gender[1:] }}</td>
                                                        <td>{{ user.date_of_birth }}</td>
                                                        <td>{{ user.phone_number }}</td>
                                                        <td>{{ user.status }}</td>
                                                        {% if user.role == "senioremployee" %}
                                                        <td>{{ _("Senior employee") }}</td>
                                                        {% elif user.role == "meterreader" %}
                                                        <td>{{ _("Meter reader") }}</td>
                                                        {% else %}
                                                        <td>{{ user.roles[0]|upper}}{{user.roles[1:] }}</td>
                                                        {% endif %}
                                                        <td>{{ user.email_address }}</td>
                                                        <td>{{ user.city }}</td>
                                                        {% set date_list = user.created_at.split(' ') %}
                                                        <td>{{ date_list[0] }}</td>
                                                        <td>
                                                            <a class="waves-effect waves-light modal-trigger"
                                                               data-target="modal_{{ user.employee_number }}">
                                                                <i class="material-icons">create</i>
                                                            </a>
                                                        </td>
                                                        <td>
                                                            <a class="waves-effect waves-light modal-trigger"
                                                               data-target="modal_manage_{{ user.employee_number }}">
                                                                <i class="material-icons">more_vert</i>
                                                            </a>
                                                        </td>
                                                        <div id="modal_manage_{{ user.employee_number }}"
                                                             class="modal col s12 m6" tabindex="-1"
                                                             style="overflow:auto; width:35% !important;">
                                                            <div class="modal-content">
                                                                <div class="row">
                                                                    <h4>{{ _("Manage Employee Status")}}</h4>
                                                                    <p> {{ user.employee_number }} </p>
                                                                </div>

                                                                <div class="row">
                                                                    {% include
                                                                    "corporate_dashboard_manage_employee_status.html" %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </tr>
                                                    <div id="modal_{{ user.employee_number }}" class="modal col s12 m6"
                                                         style="overflow:auto; height:60% !important; padding-bottom: 0px;"
                                                         tabindex="-1">
                                                        <div class="modal-content">
                                                            <div class="row">
                                                                <h4>{{ _("Edit Employee details")}}</h4>
                                                                <p> {{ user.employee_number }} </p>
                                                            </div>

                                                            <div class="row">
                                                                {% include "corporate_dashboard_edit_employee_form.html"
                                                                %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="divider"></div>
                                            <div class="col s12 m11.5">
                                                {% if users %}
                                                {% include "corporate_dashboard_table_pagination.html" %}
                                                {% endif %}
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end container -->
        </section>
    </div>

</div>

{% include "footer.html" %}

{% endblock %}